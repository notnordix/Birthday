<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="true">
    <meta name="format-detection" content="telephone=no">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Poppins:wght@600;700&display=swap"
        rel="stylesheet">
    <title>XXXXXXX</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
        }

        .section {
            display: none;
            width: 100vw;
            height: 100vh;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-in-out;
        }

        .section.active {
            display: flex;
            opacity: 1;
        }

        .section:not(.active) {
            opacity: 0;
            display: none;
        }

        /* Loader Styles */
        .loader-container {
            font-family: 'Roboto', sans-serif;
            justify-content: center;
            align-items: center;
            background: #1a1a1a;
            animation: backgroundColor 5s linear infinite;
        }

        @keyframes backgroundColor {
            0% {
                filter: hue-rotate(0deg);
            }

            100% {
                filter: hue-rotate(360deg);
            }
        }

        .loader-container h1 {
            position: absolute;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #050c09;
            animation: text 1s ease-in-out infinite;
            animation-delay: 1s;
        }

        .loader-container .loader {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .loader-container .loader .item {
            position: absolute;
            background: #050c09;
            width: 5px;
            height: 25px;
            border-radius: 3px;
            left: 50%;
            transform: rotate(calc(18deg * var(--i)));
            transform-origin: 0 125px;
            animation: circle 1.9s ease-in-out infinite;
            animation-delay: calc(0.05s * var(--i));
        }

        @keyframes circle {

            0%,
            50% {
                background: #050c09;
                box-shadow: none;
            }

            50.1%,
            100% {
                background: var(--glow-color, #0f0);
                box-shadow: 0 0 5px var(--glow-color, #0f0), 0 0 15px var(--glow-color, #0f0), 0 0 30px var(--glow-color, #0f0), 0 0 60px var(--glow-color, #0f0), 0 0 90px var(--glow-color, #0f0);
            }
        }

        @keyframes text {

            0%,
            50% {
                color: #050c09;
                text-shadow: none;
            }

            50.1%,
            100% {
                color: var(--glow-color, #0f0);
                text-shadow: 0 0 5px var(--glow-color, #0f0), 0 0 15px var(--glow-color, #0f0), 0 0 30px var(--glow-color, #0f0), 0 0 60px var(--glow-color, #0f0), 0 0 90px var(--glow-color, #0f0);
            }
        }

        /* Media queries for responsiveness */
        @media (max-width: 768px) {
            .loader {
                width: 150px;
                height: 150px;
            }

            .loader .item {
                width: 4px;
                height: 20px;
                transform-origin: 0 95px;
            }

            h1 {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .loader {
                width: 100px;
                height: 100px;
            }

            .loader .item {
                width: 3px;
                height: 15px;
                transform-origin: 0 65px;
            }

            h1 {
                font-size: 12px;
            }
        }

        /* Black Screen with Button */
        .black-screen-container {
            background-color: black;
            justify-content: center;
            align-items: center;
        }

        .black-screen-container button {
            padding: 1rem 2rem;
            font-size: 1.5rem;
            background-color: transparent;
            color: red;
            border: 2px solid red;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .black-screen-container button:hover {
            background: red;
            color: white;
        }

        /* Hero Styles */
        .hero-container {
            background-color: black;
            margin: 0;
            padding: 0;
            overflow: hidden;
            justify-content: center;
            align-items: center;
            color: black;
            font-family: 'Roboto', sans-serif;
            text-align: center;
        }

        .hero-container #lamp {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        .hero-container .lamp-switch {
            position: absolute;
            bottom: 3rem;
            width: 4rem;
            height: 4rem;
        }

        .hero-container .lamp {
            position: absolute;
            margin: 0 auto;
            width: .7rem;
            height: 3rem;
            background-image: linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)), linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)), linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7));
            background-repeat: no-repeat;
            background-size: .15rem 8rem, .4rem .8rem, .7rem 2rem;
            background-position: 50% 0, .19rem 8rem, 0 8.8rem;
        }

        .hero-container .lamp:before,
        .hero-container .lamp:after {
            content: '';
            position: absolute;
        }

        .hero-container .lamp:before {
            left: -1.65rem;
            bottom: -4rem;
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.03);
            box-shadow: inset 2px -2px 10px rgba(255, 255, 255, 0.07);
            transition: all .15s;
        }

        .hero-container .gonna-give-light,
        .hero-container .gonna-give-light:before {
            position: absolute;
        }

        .hero-container .gonna-give-light {
            top: 3.05rem;
            left: .25rem;
            width: 0;
            height: 1.5rem;
            border-right: .2rem solid rgba(255, 255, 255, 0.05);
        }

        .hero-container .gonna-give-light:before {
            content: '';
            top: 1.5rem;
            left: -.35rem;
            width: .9rem;
            height: .9rem;
            border-radius: 50%;
            border: .2rem solid rgba(255, 255, 255, 0.05);
            box-shadow: 0px 0px 50px rgba(255, 255, 255, 0);
        }

        .hero-container input[type="radio"]:checked~.lamp:before {
            background: rgb(255, 255, 255);
            box-shadow: 0px 2px 10px rgb(255, 255, 255, 0.8), 0px 5px 50px rgb(255, 255, 255, 0.6), 0px 8px 80px rgb(255, 255, 255, 0.4), 0px 8px 120px rgb(255, 255, 255, 0.2);
        }

        .hero-container input[type="radio"] {
            opacity: 0;
            position: absolute;
        }

        .hero-container .lamp1 {
            top: 0;
            left: 70px;
        }

        .hero-container .lamp2 {
            top: 0;
            right: 70px;
        }

        .hero-container .lamp3 {
            top: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .hero-container .cake {
            position: absolute;
            width: 250px;
            height: 200px;
            top: 75%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .hero-container .plate {
            width: 270px;
            height: 110px;
            position: absolute;
            bottom: -10px;
            left: -10px;
            background-color: #ccc;
            border-radius: 50%;
            box-shadow: 0 2px 0 #999, 0 4px 0 #999, 0 5px 40px rgba(0, 0, 0, 0.5);
        }

        .hero-container .cake>* {
            position: absolute;
        }

        .hero-container .layer {
            display: block;
            width: 250px;
            height: 100px;
            border-radius: 50%;
            background-color: #553c13;
            box-shadow: 0 2px 0px #654116, 0 4px 0px #4b3410, 0 6px 0px #4a3310, 0 8px 0px #493210, 0 10px 0px #483110, 0 12px 0px #473010, 0 14px 0px #463010, 0 16px 0px #452f10, 0 18px 0px #442e10, 0 20px 0px #432d10, 0 22px 0px #422c10, 0 24px 0px #412c10, 0 26px 0px #402b10, 0 28px 0px #3f2a10, 0 30px 0px #3e2910;
        }

        .hero-container .layer-top {
            top: 0px;
        }

        .hero-container .layer-middle {
            top: 33px;
        }

        .hero-container .layer-bottom {
            top: 66px;
        }

        .hero-container .icing {
            top: 2px;
            left: 5px;
            background-color: #f0e4d0;
            width: 240px;
            height: 90px;
            border-radius: 50%;
        }

        .hero-container .icing:before {
            content: "";
            position: absolute;
            top: 4px;
            right: 5px;
            bottom: 6px;
            left: 5px;
            background-color: #f5e9d5;
            box-shadow: 0 0 4px #f7ebd7, 0 0 4px #f7ebd7, 0 0 4px #f7ebd7;
            border-radius: 50%;
            z-index: 1;
        }

        .hero-container .drip {
            display: block;
            width: 50px;
            height: 60px;
            border-bottom-left-radius: 25px;
            border-bottom-right-radius: 25px;
            background-color: #f0e4d0;
        }

        .hero-container .drip1 {
            top: 53px;
            left: 5px;
            transform: skewY(15deg);
            height: 48px;
            width: 40px;
        }

        .hero-container .drip2 {
            top: 69px;
            left: 181px;
            transform: skewY(-15deg);
        }

        .hero-container .drip3 {
            top: 54px;
            left: 90px;
            width: 80px;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
        }

        .hero-container .candle {
            background-color: #7b020b;
            width: 16px;
            height: 50px;
            border-radius: 8px / 4px;
            top: -20px;
            left: 50%;
            margin-left: -8px;
            z-index: 10;
            cursor: pointer;
        }

        .hero-container .candle:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 16px;
            height: 8px;
            border-radius: 50%;
            background-color: #8f2a2d;
        }

        .hero-container .flame {
            position: absolute;
            background-color: orange;
            width: 15px;
            height: 35px;
            border-radius: 10px 10px 10px 10px / 25px 25px 10px 10px;
            top: -34px;
            left: 50%;
            margin-left: -7.5px;
            z-index: 10;
            box-shadow: 0 0 10px rgba(255, 165, 0, 0.5), 0 0 20px rgba(255, 165, 0, 0.5), 0 0 60px rgba(255, 165, 0, 0.5), 0 0 80px rgba(255, 165, 0, 0.5);
            transform-origin: 50% 90%;
            animation: flicker 1s ease-in-out alternate infinite;
        }

        @keyframes flicker {
            0% {
                transform: skewX(5deg);
                box-shadow: 0 0 10px rgba(255, 165, 0, 0.2), 0 0 20px rgba(255, 165, 0, 0.2), 0 0 60px rgba(255, 165, 0, 0.2), 0 0 80px rgba(255, 165, 0, 0.2);
            }

            25% {
                transform: skewX(-5deg);
                box-shadow: 0 0 10px rgba(255, 165, 0, 0.5), 0 0 20px rgba(255, 165, 0, 0.5), 0 0 60px rgba(255, 165, 0, 0.5), 0 0 80px rgba(255, 165, 0, 0.5);
            }

            50% {
                transform: skewX(10deg);
                box-shadow: 0 0 10px rgba(255, 165, 0, 0.3), 0 0 20px rgba(255, 165, 0, 0.3), 0 0 60px rgba(255, 165, 0, 0.3), 0 0 80px rgba(255, 165, 0, 0.3);
            }

            75% {
                transform: skewX(-10deg);
                box-shadow: 0 0 10px rgba(255, 165, 0, 0.4), 0 0 20px rgba(255, 165, 0, 0.4), 0 0 60px rgba(255, 165, 0, 0.4), 0 0 80px rgba(255, 165, 0, 0.4);
            }

            100% {
                transform: skewX(5deg);
                box-shadow: 0 0 10px rgba(255, 165, 0, 0.5), 0 0 20px rgba(255, 165, 0, 0.5), 0 0 60px rgba(255, 165, 0, 0.5), 0 0 80px rgba(255, 165, 0, 0.5);
            }
        }

        .hero-container .out .flame {
            display: none;
        }

        .hero-container .message {
            position: absolute;
            bottom: 10%;
            width: 100%;
            font-size: 0.5rem;
            text-align: center;
            color: white;
        }

        .hero-container .birthday-text {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        .hero-container .name {
            text-transform: uppercase;
            text-align: center;
            font-size: 2rem;
            font-family: 'Roboto', sans-serif;
            font-weight: 600;
            transform: scale(.5);
            color: #121212;
            -webkit-text-stroke: 2px red;
        }

        .hero-container .name span:nth-child(1) {
            animation: hover 1s linear infinite;
        }

        .hero-container .name span:nth-child(2) {
            animation: hover 1s linear infinite .125s;
        }

        .hero-container .name span:nth-child(3) {
            animation: hover 1s linear infinite .25s;
        }

        .hero-container .name span:nth-child(4) {
            animation: hover 1s linear infinite .375s;
        }

        .hero-container .name span:nth-child(5) {
            animation: hover 1s linear infinite .5s;
        }

        .hero-container .name span:nth-child(6) {
            animation: hover 1s linear infinite .675s;
        }

        .hero-container .name span:nth-child(7) {
            animation: hover 1s linear infinite .75s;
        }

        @keyframes hover {
            0% {
                transform: scale(.5);
                color: #121212;
                -webkit-text-stroke: 2px lightgray;
            }

            20% {
                transform: scale(1);
                color: #ff69b4;
                -webkit-text-stroke: 3px #ff4500;
                filter: drop-shadow(0 0 1px black) drop-shadow(0 0 1px black) drop-shadow(0 0 3px #ff4500) drop-shadow(0 0 5px #ff4500) hue-rotate(10turn);
            }

            50% {
                transform: scale(.5);
                color: #121212;
                -webkit-text-stroke: 2px lightgray;
            }
        }

        .message-section,
        .trivia-section,
        .message-screen-container,
        .flowers-container,
        .countdown-container {
            justify-content: center;
            align-items: center;
            background-color: black;
            color: white;
        }

        .message-section .message-card,
        .trivia-section .trivia-card,
        .message-screen-container div {
            color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .message-screen-container div {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .message-screen-container div p {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: white;
        }

        .flowers-container {
            --dark-color: #000;
            --rose-petal-color: red;
            --rose-petal-gradient: linear-gradient(to top, red, #ff2c2c);
            --rose-stem-color: rgb(0, 195, 0);
        }

        /* Ensure the .night div doesn't cause overflow */
        .flowers-container .night {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            filter: blur(0.1vmin);
        }

        .flowers-container {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            background-color: var(--dark-color);
            overflow: hidden;
            perspective: 1000px;
        }

        .flowers {
            position: relative;
            transform: scale(0.8);
        }

        .flower {
            position: absolute;
            bottom: 10vmin;
            transform-origin: bottom center;
            z-index: 10;
            --fl-speed: 0.8s;
        }

        .flower--1 {
            animation: moving-flower-1 4s linear infinite;
        }

        .flower--1 .flower__line {
            animation-delay: 0.3s;
            height: 70vmin;
        }

        .flower--1 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.6s backwards;
        }

        .flower--1 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.4s backwards;
        }

        .flower--1 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.2s backwards;
        }

        .flower--1 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1s backwards;
        }

        .flower--1 .flower__line__leaf--5 {
            animation: blooming-leaf-right var(--fl-speed) 1.8s backwards;
        }

        .flower--1 .flower__line__leaf--6 {
            animation: blooming-leaf-left var(--fl-speed) 2s backwards;
        }

        .flower--2 {
            left: 50%;
            transform: rotate(20deg);
            animation: moving-flower-2 4s linear infinite;
        }

        .flower--2 .flower__line {
            height: 60vmin;
            animation-delay: 0.6s;
        }

        .flower--2 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.9s backwards;
        }

        .flower--2 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.7s backwards;
        }

        .flower--2 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.5s backwards;
        }

        .flower--2 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.3s backwards;
        }

        .flower--3 {
            left: 50%;
            transform: rotate(-15deg);
            animation: moving-flower-3 4s linear infinite;
        }

        .flower--3 .flower__line {
            animation-delay: 0.9s;
        }

        .flower--3 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.5s backwards;
        }

        .flower--3 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 2.3s backwards;
        }

        .flower--3 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 2.1s backwards;
        }

        .flower--3 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.9s backwards;
        }

        .flower--4 {
            left: 60%;
            transform: rotate(25deg);
            animation: moving-flower-4 4s linear infinite;
        }

        .flower--4 .flower__line {
            height: 65vmin;
            animation-delay: 0.7s;
        }

        .flower--4 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.0s backwards;
        }

        .flower--4 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.8s backwards;
        }

        .flower--4 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.6s backwards;
        }

        .flower--4 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.4s backwards;
        }

        .flower--5 {
            left: 70%;
            transform: rotate(-10deg);
            animation: moving-flower-5 4s linear infinite;
        }

        .flower--5 .flower__line {
            height: 65vmin;
            animation-delay: 0.8s;
        }

        .flower--5 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.3s backwards;
        }

        .flower--5 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 2.1s backwards;
        }

        .flower--5 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.9s backwards;
        }

        .flower--5 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.7s backwards;
        }

        .flower--5 .flower__line__leaf--5 {
            animation: blooming-leaf-right var(--fl-speed) 2.5s backwards;
        }

        .flower--5 .flower__line__leaf--6 {
            animation: blooming-leaf-left var(--fl-speed) 2.7s backwards;
        }

        .flower--6 {
            left: 30%;
            transform: rotate(5deg);
            animation: moving-flower-6 4s linear infinite;
        }

        .flower--6 .flower__line {
            height: 80vmin;
            animation-delay: 0.4s;
        }

        .flower--6 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.5s backwards;
        }

        .flower--6 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.3s backwards;
        }

        .flower--6 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.1s backwards;
        }

        .flower--6 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 0.9s backwards;
        }

        .flower--6 .flower__line__leaf--5 {
            animation: blooming-leaf-right var(--fl-speed) 1.7s backwards;
        }

        .flower--6 .flower__line__leaf--6 {
            animation: blooming-leaf-left var(--fl-speed) 1.9s backwards;
        }

        .flower--7 {
            left: 40%;
            transform: rotate(-40deg);
            animation: moving-flower-7 4s linear infinite;
        }

        .flower--7 .flower__line {
            height: 50vmin;
            animation-delay: 0.5s;
        }

        .flower--7 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.8s backwards;
        }

        .flower--7 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.6s backwards;
        }

        .flower--7 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.4s backwards;
        }

        .flower--7 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.2s backwards;
        }

        .flower__leafs {
            position: relative;
            animation: blooming-flower 2s backwards;
        }

        .flower__leafs::after {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            transform: translate(-50%, -100%);
            width: 8vmin;
            height: 8vmin;
            background-color: red;
            filter: blur(10vmin);
        }

        .flower__leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 8vmin;
            height: 11vmin;
            border-radius: 51% 49% 47% 53% / 44% 45% 55% 69%;
            background-color: var(--rose-petal-color);
            background-image: var(--rose-petal-gradient);
            transform-origin: bottom center;
            opacity: 0.9;
            box-shadow: inset 0 0 2vmin rgba(255, 255, 255, 0.5);
        }

        .flower__leaf--1 {
            transform: translate(-10%, 1%) rotateY(40deg) rotateX(-50deg);
        }

        .flower__leaf--2 {
            transform: translate(-50%, -4%) rotateX(40deg);
        }

        .flower__leaf--3 {
            transform: translate(-90%, 0%) rotateY(45deg) rotateX(50deg);
        }

        .flower__leaf--4 {
            width: 8vmin;
            height: 8vmin;
            transform-origin: bottom left;
            border-radius: 4vmin 10vmin 4vmin 4vmin;
            transform: translate(-0%, 18%) rotateX(70deg) rotate(-43deg);
            background-image: linear-gradient(to top, red, #ff2c2c);
            z-index: 1;
            opacity: 0.8;
        }

        .flower__white-circle {
            position: absolute;
            left: -3.5vmin;
            top: -3vmin;
            width: 9vmin;
            height: 4vmin;
            border-radius: 50%;
            background-color: #fff;
        }

        .flower__white-circle::after {
            content: "";
            position: absolute;
            left: 50%;
            top: 45%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            border-radius: inherit;
            background-image: repeating-linear-gradient(300deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(67.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(135deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(112.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(112.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(22.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(22.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(135deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(157.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(67.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(67.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), linear-gradient(90deg, rgb(255, 235, 18), rgb(255, 206, 0));
        }

        .flower__line {
            height: 55vmin;
            width: 1.5vmin;
            background-image: linear-gradient(to left, rgb(0, 0, 0, 0.2), transparent, rgba(255, 255, 255, 0.2)), linear-gradient(to top, transparent 10%, var(--rose-stem-color), var(--rose-stem-color));
            box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.5);
            animation: grow-flower-tree 4s backwards;
        }

        .flower__line__leaf {
            --w: 7vmin;
            --h: calc(var(--w) + 2vmin);
            position: absolute;
            top: 20%;
            left: 90%;
            width: var(--w);
            height: var(--h);
            border-top-right-radius: var(--h);
            border-bottom-left-radius: var(--h);
            background-image: linear-gradient(to top, rgba(0, 128, 0, 0.4), var(--rose-stem-color));
        }

        .flower__line__leaf--1 {
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--2 {
            top: 45%;
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--3,
        .flower__line__leaf--4,
        .flower__line__leaf--6 {
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-top-left-radius: var(--h);
            border-bottom-right-radius: var(--h);
            left: -460%;
            top: 12%;
            transform: rotate(-70deg) rotateY(30deg);
        }

        .flower__line__leaf--4 {
            top: 40%;
        }

        .flower__line__leaf--5 {
            top: 0;
            transform-origin: left;
            transform: rotate(70deg) rotateY(30deg) scale(0.6);
        }

        .flower__line__leaf--6 {
            top: -2%;
            left: -450%;
            transform-origin: right;
            transform: rotate(-70deg) rotateY(30deg) scale(0.6);
        }

        .flower__light {
            position: absolute;
            bottom: 0vmin;
            width: 1vmin;
            height: 1vmin;
            background-color: rgb(255, 251, 0);
            border-radius: 50%;
            filter: blur(0.2vmin);
            animation: light-ans 4s linear infinite backwards;
        }

        .flower__light:nth-child(odd) {
            background-color: #ff2c2c;
        }

        .flower__light--1 {
            left: -2vmin;
            animation-delay: 1s;
        }

        .flower__light--2 {
            left: 3vmin;
            animation-delay: 0.5s;
        }

        .flower__light--3 {
            left: -6vmin;
            animation-delay: 0.3s;
        }

        .flower__light--4 {
            left: 6vmin;
            animation-delay: 0.9s;
        }

        .flower__light--5 {
            left: -1vmin;
            animation-delay: 1.5s;
        }

        .flower__light--6 {
            left: -4vmin;
            animation-delay: 3s;
        }

        .flower__light--7 {
            left: 3vmin;
            animation-delay: 2s;
        }

        .flower__light--8 {
            left: -6vmin;
            animation-delay: 3.5s;
        }

        @keyframes moving-flower-1 {

            0%,
            100% {
                transform: rotate(2deg);
            }

            50% {
                transform: rotate(-2deg);
            }
        }

        @keyframes moving-flower-2 {

            0%,
            100% {
                transform: rotate(14deg);
            }

            50% {
                transform: rotate(9deg);
            }
        }

        @keyframes moving-flower-3 {

            0%,
            100% {
                transform: rotate(-18deg);
            }

            50% {
                transform: rotate(-20deg) rotateY(-10deg);
            }
        }

        @keyframes moving-flower-4 {

            0%,
            100% {
                transform: rotate(10deg);
            }

            50% {
                transform: rotate(14deg) rotateY(10deg);
            }
        }

        @keyframes moving-flower-5 {

            0%,
            100% {
                transform: rotate(-10deg);
            }

            50% {
                transform: rotate(-8deg);
            }
        }

        @keyframes moving-flower-6 {

            0%,
            100% {
                transform: rotate(5deg);
            }

            50% {
                transform: rotate(2deg);
            }
        }

        @keyframes moving-flower-7 {

            0%,
            100% {
                transform: rotate(0deg);
            }

            50% {
                transform: rotate(-5deg);
            }
        }

        @keyframes blooming-leaf-right {
            0% {
                transform-origin: left;
                transform: rotate(70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes blooming-leaf-left {
            0% {
                transform-origin: right;
                transform: rotate(-70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes grow-flower-tree {
            0% {
                height: 0;
                border-radius: 1vmin;
            }
        }

        @keyframes blooming-flower {
            0% {
                transform: scale(0);
            }
        }

        @keyframes light-ans {
            0% {
                opacity: 0;
                transform: translateY(0vmin);
            }

            25% {
                opacity: 1;
                transform: translateY(-5vmin) translateX(-2vmin);
            }

            50% {
                opacity: 1;
                transform: translateY(-15vmin) translateX(2vmin);
                filter: blur(0.2vmin);
            }

            75% {
                transform: translateY(-20vmin) translateX(-2vmin);
                filter: blur(0.2vmin);
            }

            100% {
                transform: translateY(-30vmin);
                opacity: 0;
                filter: blur(1vmin);
            }
        }

        .not-loaded * {
            animation-play-state: paused !important;
        }

        @media (max-width: 768px) {
            .flowers {
                transform: scale(1);
            }
        }

        @media (max-width: 500px) {
            .flowers {
                transform: scale(1.5);
            }
        }

        @media (max-width: 400px) {
            .flowers {
                transform: scale(1.5);
            }
        }

        .countdown-container * {
            box-sizing: border-box;
        }

        .countdown-container {
            height: 100vh;
            margin: 0;
            padding: 0;
            background-color: hsl(0, 0%, 0%);
            display: flex;
            gap: 1rem;
            align-content: center;
            justify-content: center;
            flex-direction: column;
        }

        .countdown-container h1 {
            font-family: system-ui, sans-serif;
            color: hsl(0, 0%, 100%);
            text-align: center;
        }

        .countdown-container h1>span:last-of-type {
            color: gold;
        }

        .countdown-container .countdown {
            font-family: system-ui, sans-serif;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            width: min(20rem, 100%);
            margin-inline: auto;
        }

        .countdown-container .countdown .part {
            aspect-ratio: 1 / 1;
            display: grid;
            place-items: center;
        }

        .countdown-container .countdown .remaining {
            grid-area: 1 / 1;
            color: hsl(0, 0%, 100%);
            display: grid;
            text-align: center;
            font-size: 4cqi;
        }

        .countdown-container .countdown .number {
            color: hsl(0, 0%, 100%);
        }

        .countdown-container .countdown .text {
            color: hsl(0, 0%, 62%);
            text-transform: uppercase;
            font-size: 0.5em;
        }

        .countdown-container .dot-container {
            grid-area: 1 / 1;
            width: 100%;
            height: 4%;
            transform-origin: center;
            rotate: calc(360deg / var(--dots) * var(--dot-idx) - -90deg);
        }

        .countdown-container .dot {
            width: 100%;
            height: 100%;
            transform-origin: top;
            transform: rotate(90deg);
            width: 4%;
            aspect-ratio: 1 / 1;
            background-color: hsla(0, 0%, 10%);
            border-radius: 50%;
            transition: background-color 0.25s;
        }

        .countdown-container .dot[data-active="true"] {
            background-color: gold;
        }

        .countdown-container .dot[data-lastactive="true"] {
            background-color: red;
        }
    </style>
</head>

<body>
    <div id="loader" class="section loader-container active">
        <div class="container">
            <div class="loader">
                <h1>Loading</h1>
                <div class="item" style="--i:1;"></div>
                <div class="item" style="--i:2;"></div>
                <div class="item" style="--i:3;"></div>
                <div class="item" style="--i:4;"></div>
                <div class="item" style="--i:5;"></div>
                <div class="item" style="--i:6;"></div>
                <div class="item" style="--i:7;"></div>
                <div class="item" style="--i:8;"></div>
                <div class="item" style="--i:9;"></div>
                <div class="item" style="--i:10;"></div>
                <div class="item" style="--i:11;"></div>
                <div class="item" style="--i:12;"></div>
                <div class="item" style="--i:13;"></div>
                <div class="item" style="--i:14;"></div>
                <div class="item" style="--i:15;"></div>
                <div class="item" style="--i:16;"></div>
                <div class="item" style="--i:17;"></div>
                <div class="item" style="--i:18;"></div>
                <div class="item" style="--i:19;"></div>
                <div class="item" style="--i:20;"></div>
            </div>
        </div>
    </div>

    <div id="black-screen" class="section black-screen-container">
        <button onclick="showNextSection()">Turn on the Lights</button>
    </div>

    <div id="hero" class="section hero-container">
        <div id="lamp">
            <div class="birthday-text">Happy Birthday, <br><span class="name">
                    <span>X</span>
                    <span>X</span>
                    <span>X</span>
                    <span>X</span>
                    <span>X</span>
                    <span>X</span>
                    <span>X</span>
                </span></div>
            <input type="radio" name="switch1" value="on" id="on1" class="lamp-switch" />
            <input type="radio" name="switch1" value="off" id="off1" class="lamp-switch" checked="checked" />
            <input type="radio" name="switch2" value="on" id="on2" class="lamp-switch" />
            <input type="radio" name="switch2" value="off" id="off2" class="lamp-switch" checked="checked" />
            <input type="radio" name="switch3" value="on" id="on3" class="lamp-switch" />
            <input type="radio" name="switch3" value="off" id="off3" class="lamp-switch" checked="checked" />
            <div class="lamp lamp1">
                <div class="gonna-give-light"></div>
            </div>
            <div class="lamp lamp2">
                <div class="gonna-give-light"></div>
            </div>
            <div class="lamp lamp3">
                <div class="gonna-give-light"></div>
            </div>
            <div class="cake">
                <div class="plate"></div>
                <div class="layer layer-bottom"></div>
                <div class="layer layer-middle"></div>
                <div class="layer layer-top"></div>
                <div class="icing"></div>
                <div class="drip drip1"></div>
                <div class="drip drip2"></div>
                <div class="drip drip3"></div>
                <div class="candle" onclick="blowOutCandle()">
                    <div class="flame"></div>
                </div>
            </div>
            <div class="message">
                Note: Click on the candle to blow it out, but Make a wish before you blow it!
            </div>
            <canvas id="birthday" style="display:none;"></canvas>
        </div>
        <audio id="birthday-song" src="happy-birthday-lofi-version-222774.mp3"></audio>
    </div>

    <div id="messages" class="section message-section">
        <div class="message-card">
            <p>To a wonderful person who deserves the best on her special day.</p>
            <button onclick="showNextSection()">Next</button>
        </div>
    </div>

    <div id="trivia" class="section trivia-section">
        <div class="trivia-card">
            <p>Did you know?.</p>
            <button onclick="showNextSection()">Next</button>
        </div>
    </div>

    <div id="message-screen" class="section black-screen-container message-screen-container">
        <div>
            <p>I have something for you!</p>
            <button onclick="showNextSection()">Click me</button>
        </div>
    </div>
    <div id="flowers" class="section flowers-container not-loaded">
        <div class="night"></div>
        <div class="flowers">
            <div class="flower flower--1">
                <div class="flower__leafs flower__leafs--1">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                    <div class="flower__line__leaf flower__line__leaf--5"></div>
                    <div class="flower__line__leaf flower__line__leaf--6"></div>
                </div>
            </div>

            <div class="flower flower--2">
                <div class="flower__leafs flower__leafs--2">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>

            <div class="flower flower--3">
                <div class="flower__leafs flower__leafs--3">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>

            <div class="flower flower--4">
                <div class="flower__leafs flower__leafs--4">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>

            <div class="flower flower--5">
                <div class="flower__leafs flower__leafs--5">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                    <div class="flower__light flower__light--7"></div>
                    <div class="flower__light flower__light--8"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                    <div class="flower__line__leaf flower__line__leaf--5"></div>
                    <div class="flower__line__leaf flower__line__leaf--6"></div>
                </div>
            </div>

            <div class="flower flower--6">
                <div class="flower__leafs flower__leafs--6">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>

            <div class="flower flower--7">
                <div class="flower__leafs flower__leafs--7">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>

                    <div class="flower__light flower__light--1"></div>
                    <div class="flower__light flower__light--2"></div>
                    <div class="flower__light flower__light--3"></div>
                    <div class="flower__light flower__light--4"></div>
                    <div class="flower__light flower__light--5"></div>
                    <div class="flower__light flower__light--6"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
            </div>
        </div>

    </div>

    <div id="countdown" class="section countdown-container">
        <h1>Countdown Until Your <span>Next Birthday</span></h1>
        <div class="countdown" data-target-date="2025-07-27T00:00:00"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.section');
            let currentSection = 0;

            function showNextSection() {
                if (currentSection < sections.length - 1) {
                    sections[currentSection].classList.remove('active');
                    currentSection++;
                    sections[currentSection].classList.add('active');

                    // Specific actions for sections
                    if (sections[currentSection].id === 'hero') {
                        const audio = document.getElementById('birthday-song');
                        audio.play();
                    }

                    if (sections[currentSection].id === 'flowers') {
                        setTimeout(() => showNextSection(), 10000);
                        document.querySelector('.flowers-container').classList.remove("not-loaded");
                    } else {
                        // Ensure the night div is hidden when not in the flowers section
                        document.querySelector('.night').style.display = 'none';
                    }

                    if (sections[currentSection].id === 'countdown') {
                        const countdownEl = document.querySelector(".countdown");
                        createCountdown(countdownEl);
                    }
                }
            }



            function blowOutCandle() {
                console.log("Blow out candle triggered");
                const flame = document.querySelector(".hero-container .flame");
                const birthdayText = document.querySelector('.hero-container .birthday-text');
                const lamps = document.querySelectorAll('.hero-container .lamp');
                const audio = document.getElementById('birthday-song');

                flame.style.display = 'none';
                document.getElementById('birthday').style.display = 'block';
                birthdayText.style.color = 'white';
                lamps.forEach(lamp => lamp.style.display = 'none');

                audio.pause();
                startFireworks();

                setTimeout(() => showNextSection(), 7000);
            }

            function startFireworks() {
                const canvas = document.getElementById('birthday');
                const ctx = canvas.getContext('2d');
                let width = canvas.width = window.innerWidth;
                let height = canvas.height = window.innerHeight;
                let fireworks = [];
                let counter = 0;

                const random = (min, max) => Math.random() * (max - min + 1) + min | 0;
                const PI2 = Math.PI * 2;

                class Firework {
                    constructor(x, y, targetX, targetY, shade, offsprings) {
                        this.dead = false;
                        this.offsprings = offsprings;
                        this.x = x;
                        this.y = y;
                        this.targetX = targetX;
                        this.targetY = targetY;
                        this.shade = shade;
                        this.history = [];
                    }

                    update(delta) {
                        if (this.dead) return;

                        let xDiff = this.targetX - this.x;
                        let yDiff = this.targetY - this.y;
                        if (Math.abs(xDiff) > 3 || Math.abs(yDiff) > 3) {
                            this.x += xDiff * 2 * delta;
                            this.y += yDiff * 2 * delta;

                            this.history.push({ x: this.x, y: this.y });

                            if (this.history.length > 20) this.history.shift();
                        } else {
                            if (this.offsprings && !this.madeChilds) {
                                let babies = this.offsprings / 2;
                                for (let i = 0; i < babies; i++) {
                                    let targetX = this.x + this.offsprings * Math.cos(PI2 * i / babies) | 0;
                                    let targetY = this.y + this.offsprings * Math.sin(PI2 * i / babies) | 0;
                                    fireworks.push(new Firework(this.x, this.y, targetX, targetY, this.shade, 0));
                                }
                            }
                            this.madeChilds = true;
                            this.history.shift();
                        }

                        if (this.history.length === 0) this.dead = true;
                        else if (this.offsprings) {
                            for (let i = 0; i < this.history.length; i++) {
                                let point = this.history[i];
                                ctx.beginPath();
                                ctx.fillStyle = `hsl(${this.shade},100%,${i}%)`;
                                ctx.arc(point.x, point.y, 1, 0, PI2, false);
                                ctx.fill();
                            }
                        } else {
                            ctx.beginPath();
                            ctx.fillStyle = `hsl(${this.shade},100%,50%)`;
                            ctx.arc(this.x, this.y, 1, 0, PI2, false);
                            ctx.fill();
                        }
                    }
                }

                const loop = () => {
                    requestAnimationFrame(loop);
                    const now = new Date().getTime();
                    const delta = now - then;
                    then = now;

                    ctx.globalCompositeOperation = 'hard-light';
                    ctx.fillStyle = `rgba(20,20,20,${7 * delta / 1000})`;
                    ctx.fillRect(0, 0, width, height);

                    ctx.globalCompositeOperation = 'lighter';
                    for (let firework of fireworks) firework.update(delta / 1000);

                    counter += delta * 0.03;
                    if (counter >= 1) {
                        fireworks.push(new Firework(
                            random(width / 4, 3 * width / 4),
                            height,
                            random(0, width),
                            random(height * .1, height * .5),
                            random(0, 360),
                            random(30, 110)
                        ));
                        counter = 0;
                    }

                    if (fireworks.length > 1000) fireworks = fireworks.filter(firework => !firework.dead);
                }

                let then = new Date().getTime();
                loop();

                window.onresize = () => {
                    width = canvas.width = window.innerWidth;
                    height = canvas.height = window.innerHeight;
                };
            }

            function createCountdown(countdownEl) {
                const targetDate = new Date(countdownEl.dataset.targetDate);
                const parts = createCountdownParts();
                appendPartsToCountdown(countdownEl, parts);
                updateCountdown(targetDate, parts);

                setInterval(() => updateCountdown(targetDate, parts), 1000);
            }

            function createCountdownParts() {
                return {
                    days: { text: ["days", "day"], dots: 30 },
                    hours: { text: ["hours", "hour"], dots: 24 },
                    minutes: { text: ["minutes", "minute"], dots: 60 },
                    seconds: { text: ["seconds", "second"], dots: 60 }
                };
            }

            function appendPartsToCountdown(countdownEl, parts) {
                Object.entries(parts).forEach(([key, value]) => {
                    const partEl = document.createElement("div");
                    partEl.classList.add("part", key);
                    partEl.style.setProperty("--dots", value.dots);

                    const remainingEl = document.createElement("div");
                    remainingEl.classList.add("remaining");
                    remainingEl.innerHTML = `
                <span class="number"></span>
                <span class="text"></span>
            `;
                    partEl.append(remainingEl);

                    for (let i = 0; i < value.dots; i++) {
                        const dotContainerEl = document.createElement("div");
                        dotContainerEl.style.setProperty("--dot-idx", i);
                        dotContainerEl.classList.add("dot-container");

                        const dotEl = document.createElement("div");
                        dotEl.classList.add("dot");
                        dotContainerEl.append(dotEl);

                        partEl.append(dotContainerEl);
                    }
                    countdownEl.append(partEl);
                    value.element = partEl;
                });
            }

            function updateCountdown(target, parts) {
                const now = new Date();
                const timeDiff = Math.max(0, target - now);

                const seconds = Math.floor(timeDiff / 1000) % 60;
                const minutes = Math.floor(timeDiff / 60000) % 60;
                const hours = Math.floor(timeDiff / 3600000) % 24;
                const days = Math.floor(timeDiff / 86400000);

                const remainingTimes = { days, hours, minutes, seconds };

                Object.entries(remainingTimes).forEach(([key, value]) => {
                    const partEl = parts[key].element;
                    partEl.querySelector(".number").innerText = value;
                    partEl.querySelector(".text").innerText = parts[key].text[value === 1 ? 1 : 0];

                    const dots = partEl.querySelectorAll(".dot");
                    dots.forEach((dot, idx) => {
                        dot.dataset.active = idx < value;
                        dot.dataset.lastactive = idx === value;
                    });
                });
            }

            window.addEventListener("load", () => {
                setTimeout(() => {
                    showNextSection();
                }, 5000);
            });

            window.addEventListener('resize', () => {
                const canvas = document.getElementById('birthday');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            // Bind event listeners to buttons
            document.querySelector('#black-screen button').addEventListener('click', showNextSection);
            document.querySelector('.candle').addEventListener('click', blowOutCandle);
            document.querySelectorAll('.message-section button, .trivia-section button, .message-screen-container button').forEach(button => {
                button.addEventListener('click', showNextSection);
            });

            document.addEventListener('DOMContentLoaded', () => {
                const countdownEls = document.querySelectorAll(".countdown");
                countdownEls.forEach(countdownEl => createCountdown(countdownEl));
            });
        });


    </script>
</body>

</html>